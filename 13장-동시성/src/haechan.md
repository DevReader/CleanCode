## 13장 동시성

**동시성이란?**<br/>
- 결합을 없애는 전략.<br/>
- 무엇(작업 내용)과 언제(작업하는 시점)를 분리하는 전략.<br/>
- 독립적인 업무를 처리<sup>1</sup>하거나 속도를 위해 병렬 처리<sup>2</sup>할 때 사용한다.<br/><br/>

**동시성을 구현하기 어려운 이유**<br/>
- 잠재적인 경로가 무척 많아지기 떄문.<br/><br/>

**동시성을 다루는 원칙**<br/>
1. 단일 책임 원칙에 따라 동시성 코드는 다른 코드와 분리한다.<br/>
2. 공유 자원에 접근할 때마다 synchronized를 쓰기보다는 공유 자원을 캡슐화하여 임계 영역을 좁힌다.<br/>
3. 자료를 복사해서 사용한다.<br/>
4. thread-safe한 라이브러리를 사용한다. Ex. ConcurrentHashMap, Semaphore, Executor 프레임워크.<br/><br/>

**대표적인 동시성 실행 모델**<br/>
- 생산자-소비자: 버퍼나 큐를 이용하여 생산자와 소비자를 분리한다.<br/>
- 읽기-쓰기: 여러 스레드가 동시에 읽는 작업과 한 스레드가 쓰는 작업 중에서 하나만 실행할 수 있다<br/>
- 식사하는 철학자들: 상호 배제<sup><3/sup>적인 공유 자원.<br/><br/>

**동시성 코드 테스트하기**<br/>
- yield(), wait(), sleep() 등을 수동으로 추가한다.<br/>
- AOF, CGLIB, ASM 등의 도구는 이 과정을 자동화한다.<br/><br/>

<sup>1</sup>Ex. 서블릿 모델. 여러 클라이언트가 요청을 보내면 여러 개의 스레드가 동시적으로 응답한다.<br/>
<sup>2</sup>Ex. 정보 수집기. Io 지연으로 인해 병렬 처리가 훨씬 유리하다.<br/>
<sup>3</sup>하나의 공유 자원을 한 번에 한 스레드만 사용할 수 있다.<br/>
